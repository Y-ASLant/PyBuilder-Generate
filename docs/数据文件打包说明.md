# Nuitka æ•°æ®æ–‡ä»¶æ‰“åŒ…è¯´æ˜

> ç†è§£ä¸åŒæ¨¡å¼ä¸‹æ•°æ®æ–‡ä»¶çš„å¤„ç†æ–¹å¼

---

## ğŸ“¦ æ•°æ®æ–‡ä»¶å‚æ•°è¯´æ˜

### `--include-data-dir=æºè·¯å¾„=ç›®æ ‡è·¯å¾„`

**ç¤ºä¾‹**ï¼š`--include-data-dir=assets/pyfiglet=pyfiglet`

- **æºè·¯å¾„**ï¼šé¡¹ç›®ä¸­çš„å®é™…è·¯å¾„ï¼ˆå¦‚ `assets/pyfiglet`ï¼‰
- **ç›®æ ‡è·¯å¾„**ï¼šæ‰“åŒ…åçš„ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚ `pyfiglet`ï¼‰

---

## ğŸ”„ ä¸åŒæ¨¡å¼çš„è¡Œä¸ºå·®å¼‚

### 1ï¸âƒ£ å•æ–‡ä»¶æ¨¡å¼ (`--mode=onefile`)

```yaml
é…ç½®: assets/pyfiglet;pyfiglet
```

**æ‰“åŒ…ç»“æœ**ï¼š
```
build/
â””â”€â”€ PyBuilder.exe  (çº¦ 30-50 MB)
```

**è¿è¡Œæ—¶è¡Œä¸º**ï¼š
```
1. é¦–æ¬¡è¿è¡Œæ—¶è§£å‹ (1-3 ç§’å»¶è¿Ÿ)
2. è§£å‹åˆ°ä¸´æ—¶ç›®å½•:
   C:\Users\ç”¨æˆ·å\AppData\Local\Temp\onefile_12345678\
   â”œâ”€â”€ [å†…éƒ¨æ–‡ä»¶]
   â””â”€â”€ pyfiglet\
       â””â”€â”€ fonts\
           â””â”€â”€ *.flf

3. ç¨‹åºä»ä¸´æ—¶ç›®å½•è®¿é—®æ•°æ®
4. ç¨‹åºé€€å‡ºåï¼Œä¸´æ—¶æ–‡ä»¶è¢«åˆ é™¤
```

**ä¼˜ç‚¹**ï¼š
- âœ… å•ä¸ªæ–‡ä»¶ï¼Œåˆ†å‘æ–¹ä¾¿
- âœ… ä¸ä¼šæ³„éœ²æºä»£ç ç»“æ„
- âœ… ç”¨æˆ·ä¸ä¼šè¯¯åˆ æ•°æ®æ–‡ä»¶

**ç¼ºç‚¹**ï¼š
- âŒ é¦–æ¬¡è¿è¡Œæœ‰è§£å‹å»¶è¿Ÿ
- âŒ æ¯æ¬¡è¿è¡Œéƒ½é‡æ–°è§£å‹ï¼ˆæ¶ˆè€— I/Oï¼‰
- âŒ å¯èƒ½è¢«æ€æ¯’è½¯ä»¶æ‹¦æˆª
- âŒ æ–‡ä»¶ä½“ç§¯è¾ƒå¤§

---

### 2ï¸âƒ£ ç‹¬ç«‹æ¨¡å¼ (`--mode=standalone`)

```yaml
é…ç½®: assets/pyfiglet;pyfiglet
```

**æ‰“åŒ…ç»“æœ**ï¼š
```
build/
â””â”€â”€ PyBuilder.dist/
    â”œâ”€â”€ PyBuilder.exe  (çº¦ 5-10 MB)
    â”œâ”€â”€ [å…¶ä»– .dll å’Œä¾èµ–]
    â””â”€â”€ pyfiglet\
        â””â”€â”€ fonts\
            â””â”€â”€ *.flf
```

**è¿è¡Œæ—¶è¡Œä¸º**ï¼š
```
ç›´æ¥ä» exe åŒçº§ç›®å½•çš„ pyfiglet\ è¯»å–æ–‡ä»¶
æ— éœ€è§£å‹ï¼Œç«‹å³å¯åŠ¨
```

**ä¼˜ç‚¹**ï¼š
- âœ… å¯åŠ¨å¿«é€Ÿï¼ˆæ— è§£å‹å»¶è¿Ÿï¼‰
- âœ… å¯ä»¥æ‰‹åŠ¨æ›¿æ¢æ•°æ®æ–‡ä»¶ï¼ˆå¦‚æ›´æ–°å­—ä½“ï¼‰
- âœ… æ€æ¯’è½¯ä»¶å‹å¥½
- âœ… exe æ–‡ä»¶è¾ƒå°

**ç¼ºç‚¹**ï¼š
- âŒ éœ€è¦åˆ†å‘æ•´ä¸ªæ–‡ä»¶å¤¹
- âŒ ç”¨æˆ·å¯èƒ½è¯¯åˆ æ•°æ®æ–‡ä»¶
- âŒ æš´éœ²éƒ¨åˆ†é¡¹ç›®ç»“æ„

---

## ğŸ¯ å¦‚ä½•é€‰æ‹©æ¨¡å¼

### æ¨èä½¿ç”¨å•æ–‡ä»¶æ¨¡å¼çš„åœºæ™¯

1. **ç®€å•å·¥å…·**ï¼šåŠŸèƒ½å•ä¸€ï¼Œæ— éœ€é¢‘ç¹æ›´æ–°æ•°æ®
2. **å†…éƒ¨å·¥å…·**ï¼šå…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œä¿¡ä»»ç¯å¢ƒ
3. **æ•°æ®è¾ƒå°**ï¼šæ€»æ•°æ®é‡ < 10 MB
4. **ä¾¿æºæ€§ä¼˜å…ˆ**ï¼šéœ€è¦ U ç›˜æ‹·è´ã€ç½‘ç»œä¼ è¾“

**ç¤ºä¾‹**ï¼š
- å‘½ä»¤è¡Œå·¥å…·
- å°å‹æ¡Œé¢åº”ç”¨
- ä¸€æ¬¡æ€§è„šæœ¬

---

### æ¨èä½¿ç”¨ç‹¬ç«‹æ¨¡å¼çš„åœºæ™¯

1. **å¤§å‹åº”ç”¨**ï¼šåŒ…å«å¤§é‡èµ„æºæ–‡ä»¶
2. **éœ€è¦æ›´æ–°**ï¼šæ•°æ®æ–‡ä»¶éœ€è¦ç‹¬ç«‹æ›´æ–°
3. **æ€§èƒ½ä¼˜å…ˆ**ï¼šé¢‘ç¹è¯»å–æ•°æ®æ–‡ä»¶
4. **å¼€å‘è°ƒè¯•**ï¼šæ–¹ä¾¿æŸ¥çœ‹å’Œä¿®æ”¹èµ„æº

**ç¤ºä¾‹**ï¼š
- GUI åº”ç”¨ï¼ˆå¤§é‡å›¾ç‰‡ã€å›¾æ ‡ï¼‰
- æ¸¸æˆï¼ˆéŸ³é¢‘ã€è§†é¢‘èµ„æºï¼‰
- æ•°æ®å¤„ç†å·¥å…·ï¼ˆé…ç½®æ–‡ä»¶ã€æ¨¡æ¿ï¼‰

---

## ğŸ” å®é™…æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹ 1ï¼šPyBuilder-Generate (æœ¬é¡¹ç›®)

```yaml
æ•°æ®æ–‡ä»¶: assets/pyfiglet (çº¦ 2 MB å­—ä½“æ–‡ä»¶)
æ¨èæ¨¡å¼: å•æ–‡ä»¶æ¨¡å¼
åŸå› :
  - æ•°æ®é‡å°
  - å­—ä½“æ–‡ä»¶ä¸éœ€è¦ç”¨æˆ·ä¿®æ”¹
  - åˆ†å‘æ–¹ä¾¿
```

### æ¡ˆä¾‹ 2ï¼šå¤§å‹ GUI åº”ç”¨

```yaml
æ•°æ®æ–‡ä»¶: 
  - assets/images (50 MB å›¾ç‰‡)
  - assets/videos (200 MB è§†é¢‘)
  - config/ (é…ç½®æ–‡ä»¶)
æ¨èæ¨¡å¼: ç‹¬ç«‹æ¨¡å¼
åŸå› :
  - æ•°æ®é‡å¤§ï¼Œè§£å‹æ…¢
  - é…ç½®æ–‡ä»¶éœ€è¦ç”¨æˆ·ä¿®æ”¹
  - èµ„æºå¯èƒ½éœ€è¦æ›´æ–°
```

---

## ğŸ’¡ è®¿é—®æ‰“åŒ…åçš„æ•°æ®æ–‡ä»¶

### ä»£ç ç¤ºä¾‹

```python
import sys
from pathlib import Path

def get_resource_path(relative_path: str) -> Path:
    """
    è·å–èµ„æºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„
    å…¼å®¹å¼€å‘ç¯å¢ƒå’Œæ‰“åŒ…åç¯å¢ƒ
    """
    if getattr(sys, 'frozen', False):
        # æ‰“åŒ…åç¯å¢ƒï¼ˆNuitka/PyInstallerï¼‰
        if hasattr(sys, '_MEIPASS'):
            # PyInstaller å•æ–‡ä»¶æ¨¡å¼
            base_path = Path(sys._MEIPASS)
        else:
            # Nuitka æˆ– PyInstaller ç‹¬ç«‹æ¨¡å¼
            base_path = Path(sys.executable).parent
    else:
        # å¼€å‘ç¯å¢ƒ
        base_path = Path(__file__).parent
    
    return base_path / relative_path

# ä½¿ç”¨ç¤ºä¾‹
font_dir = get_resource_path("pyfiglet/fonts")
config_file = get_resource_path("config.yaml")
```

---

## ğŸ› ï¸ TUI ç•Œé¢é…ç½®

### æ•°æ®å¯¼å…¥ â†’ æ•°æ®ç›®å½•

**æ ¼å¼**ï¼š`æºè·¯å¾„;ç›®æ ‡è·¯å¾„`

**ç¤ºä¾‹**ï¼š

| åœºæ™¯ | é…ç½® | è¯´æ˜ |
|------|------|------|
| åŒ…å«æ•´ä¸ªæ–‡ä»¶å¤¹ | `assets/fonts;fonts` | å°† assets/fonts æ‰“åŒ…ä¸º fonts |
| ä¿æŒåŸè·¯å¾„ | `assets;assets` | ä¿æŒ assets ç›®å½•ç»“æ„ |
| é‡å‘½åæ–‡ä»¶å¤¹ | `src/data;app_data` | å°† src/data é‡å‘½åä¸º app_data |
| å¤šä¸ªæ–‡ä»¶å¤¹ | `assets;assets config;config` | ç©ºæ ¼åˆ†éš”å¤šä¸ª |

---

## âš™ï¸ å‘½ä»¤è¡Œå¯¹ç…§

### TUI é…ç½®
```
æ•°æ®ç›®å½•: assets/pyfiglet;pyfiglet
```

### ç”Ÿæˆçš„å‘½ä»¤
```bash
# å•æ–‡ä»¶æ¨¡å¼
python -m nuitka \
    --mode=onefile \
    --include-data-dir=assets/pyfiglet=pyfiglet \
    main.py

# ç‹¬ç«‹æ¨¡å¼
python -m nuitka \
    --mode=standalone \
    --include-data-dir=assets/pyfiglet=pyfiglet \
    main.py
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | å•æ–‡ä»¶æ¨¡å¼ | ç‹¬ç«‹æ¨¡å¼ |
|------|----------|---------|
| æ–‡ä»¶æ•°é‡ | 1 ä¸ª .exe | 1 ä¸ª .exe + N ä¸ªæ–‡ä»¶ |
| æ–‡ä»¶å¤§å° | è¾ƒå¤§ï¼ˆ30-50 MBï¼‰ | exe è¾ƒå°ï¼ˆ5-10 MBï¼‰ |
| å¯åŠ¨é€Ÿåº¦ | æ…¢ï¼ˆ1-3 ç§’ï¼‰ | å¿«ï¼ˆ< 0.5 ç§’ï¼‰ |
| åˆ†å‘ä¾¿åˆ©æ€§ | â­â­â­â­â­ | â­â­â­ |
| æ›´æ–°çµæ´»æ€§ | â­â­ | â­â­â­â­â­ |
| æ€æ¯’å‹å¥½åº¦ | â­â­â­ | â­â­â­â­â­ |

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. å¼€å‘é˜¶æ®µä½¿ç”¨ç‹¬ç«‹æ¨¡å¼
```yaml
mode: standalone
include_data_dirs: assets;assets
```
- æ–¹ä¾¿è°ƒè¯•
- å¿«é€Ÿè¿­ä»£
- æ˜“äºæŸ¥çœ‹èµ„æº

### 2. å‘å¸ƒé˜¶æ®µæ ¹æ®éœ€æ±‚é€‰æ‹©
```yaml
# å°å·¥å…· â†’ å•æ–‡ä»¶
mode: onefile

# å¤§åº”ç”¨ â†’ ç‹¬ç«‹æ¨¡å¼  
mode: standalone
```

### 3. æ··åˆæ–¹æ¡ˆ
```yaml
# æ ¸å¿ƒæ•°æ®æ‰“åŒ…è¿› exe
include_data_files: config/default.yaml=config.yaml

# å¯é€‰èµ„æºæ”¾åˆ°å¤–éƒ¨
include_data_dirs: plugins;plugins
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Nuitka å‚æ•°å¯¹ç…§è¡¨](./å‚æ•°å¯¹ç…§è¡¨.md)
- [å®æˆ˜ç»éªŒ](./Experience.md)
- [å®˜æ–¹æ–‡æ¡£](https://nuitka.net/doc/user-manual.html#data-files)
