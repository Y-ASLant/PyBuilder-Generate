# Nuitka å‚æ•°å¯¹ç…§è¡¨

> æœ¬æ–‡æ¡£è¯´æ˜ PyBuilder-Generate TUI ç•Œé¢é€‰é¡¹ä¸ Nuitka å‘½ä»¤è¡Œå‚æ•°çš„å¯¹åº”å…³ç³»

---

## ğŸ“‹ åŸºæœ¬é€‰é¡¹

| TUI ç•Œé¢æè¿° | Nuitka å‚æ•° | è¯´æ˜ | é…ç½®é”®å |
|------------|------------|------|---------|
| ç‹¬ç«‹æ‰“åŒ… (Standalone) | `--mode=standalone` | åˆ›å»ºç‹¬ç«‹ç›®å½•ï¼ŒåŒ…å«æ‰€æœ‰ä¾èµ– | `standalone` |
| å•æ–‡ä»¶æ¨¡å¼ (One File) | `--mode=onefile` | æ‰“åŒ…ä¸ºå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ | `onefile` |
| æ˜¾ç¤ºç»ˆç«¯çª—å£ (Windows) | é»˜è®¤å¼€å¯ / `--disable-console` | æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶å°çª—å£ | `show_console` |
| Pythonä¼˜åŒ– (ç§»é™¤æ–­è¨€å’Œæ–‡æ¡£) | `--python-flag=-O` | ä½¿ç”¨ Python ä¼˜åŒ–æ ‡å¿— | `python_flag` |
| è·Ÿéšå¯¼å…¥ (è‡ªåŠ¨åŒ…å«æ¨¡å—) | `--follow-imports` | è‡ªåŠ¨åˆ†æå¹¶åŒ…å«æ‰€æœ‰å¯¼å…¥çš„æ¨¡å— | `follow_imports` |
| ä¸ç”Ÿæˆ .pyi æ–‡ä»¶ (ä»…moduleæ¨¡å¼) | `--no-pyi-file` | ä¸ç”Ÿæˆç±»å‹æç¤ºæ–‡ä»¶ | `no_pyi_file` |

### æŒ‰é’®é€‰é¡¹

| TUI ç•Œé¢æè¿° | åŠŸèƒ½è¯´æ˜ |
|------------|---------|
| C ç¼–è¯‘å™¨... | é€‰æ‹© MSVCã€MinGW64ã€Clang-clã€Clangã€GCC ç¼–è¯‘å™¨ |
| å¯ç”¨æ’ä»¶... | é€‰æ‹©éœ€è¦çš„ Nuitka æ’ä»¶ï¼ˆå¦‚ anti-bloatã€numpy ç­‰ï¼‰ |

---

## âš™ï¸ é«˜çº§é€‰é¡¹

| TUI ç•Œé¢æè¿° | Nuitka å‚æ•° | è¯´æ˜ | é…ç½®é”®å |
|------------|------------|------|---------|
| å…³é—­ LTOï¼ˆé“¾æ¥æ—¶ä¼˜åŒ–ï¼‰ | ä¸æ·»åŠ å‚æ•° | ä¸ä½¿ç”¨é“¾æ¥æ—¶ä¼˜åŒ– | `lto: "no"` |
| å¯ç”¨ LTOï¼ˆé“¾æ¥æ—¶ä¼˜åŒ–ï¼‰ | `--lto=yes` | å¯ç”¨é“¾æ¥æ—¶ä¼˜åŒ–ï¼Œæå‡æ€§èƒ½ | `lto: "yes"` |
| è‡ªåŠ¨ LTOï¼ˆé“¾æ¥æ—¶ä¼˜åŒ–ï¼‰ | `--lto=auto` | è‡ªåŠ¨å†³å®šæ˜¯å¦ä½¿ç”¨ LTO | `lto: "auto"` |
| é™é»˜è¾“å‡º (ä»…è¿›åº¦æ¡) | `--quiet` | å‡å°‘ç¼–è¯‘è¿‡ç¨‹çš„è¾“å‡ºä¿¡æ¯ | `quiet_mode` |
| ç§»é™¤æ„å»ºæ–‡ä»¶ (èŠ‚çœç©ºé—´) | `--remove-output` | æˆåŠŸååˆ é™¤ä¸­é—´æ„å»ºæ–‡ä»¶ | `remove_output` |
| ç¼–è¯‘çº¿ç¨‹ | `--jobs=N` | å¹¶è¡Œç¼–è¯‘ä»»åŠ¡æ•°ï¼ˆ0=è‡ªåŠ¨åˆ†é…ï¼‰ | `jobs` |
| è‡ªåŠ¨ä¸‹è½½ä¾èµ– (CIç¯å¢ƒå¿…éœ€) | `--assume-yes-for-downloads` | è‡ªåŠ¨ç¡®è®¤ä¸‹è½½ç¼–è¯‘å™¨ä¾èµ– | `assume_yes_for_downloads` |

### C ç¼–è¯‘å™¨é€‰é¡¹

| ç•Œé¢é€‰æ‹© | Nuitka å‚æ•° | é…ç½®å€¼ |
|---------|------------|--------|
| MSVC (Visual Studio) | `--msvc=latest` | `compiler: "msvc"` |
| MinGW64 | `--mingw64` | `compiler: "mingw64"` |
| Clang-cl | `--clang-cl` | `compiler: "clang-cl"` |
| Clang | `--clang` | `compiler: "clang"` |
| GCC | ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ GCC | `compiler: "gcc"` |

### æ’ä»¶é€‰é¡¹

| ç•Œé¢é€‰æ‹© | Nuitka å‚æ•° | è¯´æ˜ |
|---------|------------|------|
| anti-bloat | `--enable-plugin=anti-bloat` | å‡å°‘åŒ…å¤§å°ï¼Œç§»é™¤ä¸å¿…è¦çš„ä»£ç  |
| numpy | `--enable-plugin=numpy` | NumPy æ”¯æŒ |
| tk-inter | `--enable-plugin=tk-inter` | Tkinter GUI æ”¯æŒ |
| torch | `--enable-plugin=torch` | PyTorch æ”¯æŒ |
| tensorflow | `--enable-plugin=tensorflow` | TensorFlow æ”¯æŒ |

---

## ğŸ“¦ æ•°æ®å¯¼å…¥é€‰é¡¹

| TUI ç•Œé¢æè¿° | Nuitka å‚æ•° | ç¤ºä¾‹ | é…ç½®é”®å |
|------------|------------|------|---------|
| åŒ…å«åŒ… | `--include-package=PACKAGE` | `--include-package=numpy` | `include_packages` |
| åŒ…å«æ¨¡å— | `--include-module=MODULE` | `--include-module=main` | `include_modules` |
| æ’é™¤å¯¼å…¥ | `--nofollow-import-to=MODULE` | `--nofollow-import-to=tkinter` | `nofollow_imports` |
| æ•°æ®æ–‡ä»¶ | `--include-data-files=SRC=DEST` | `--include-data-files=config.yaml=.` | `include_data_files` |
| æ•°æ®ç›®å½• | `--include-data-dir=SRC=DEST` | `--include-data-dir=assets=assets` | `include_data_dirs` |

### è¾“å…¥æ ¼å¼è¯´æ˜

- **åŒ…å«åŒ…/æ¨¡å—/æ’é™¤å¯¼å…¥**ï¼šæ”¯æŒå¤šç§åˆ†éš”ç¬¦
  - ç©ºæ ¼åˆ†éš”ï¼š`numpy pandas PIL`
  - é€—å·åˆ†éš”ï¼š`numpy,pandas,PIL`
  - ä¸­æ–‡é€—å·ï¼š`numpyï¼Œpandasï¼ŒPIL`

- **æ•°æ®æ–‡ä»¶/ç›®å½•**ï¼šä½¿ç”¨ `;` åˆ†éš”æºå’Œç›®æ ‡
  - å•ä¸ªï¼š`src/config.yaml;config.yaml`
  - å¤šä¸ªï¼š`src/config.yaml;. assets/images;images`

---

## ğŸªŸ Windows ç‰¹æ€§

| TUI ç•Œé¢æè¿° | Nuitka å‚æ•° | è¯´æ˜ | é…ç½®é”®å |
|------------|------------|------|---------|
| å›¾æ ‡æ–‡ä»¶ | `--windows-icon-from-ico=PATH` | è®¾ç½® .exe å›¾æ ‡ | `icon_file` |
| å…¬å¸åç§° | `--windows-company-name=NAME` | è®¾ç½®æ–‡ä»¶å±æ€§ä¸­çš„å…¬å¸å | `company_name` |
| äº§å“ç‰ˆæœ¬ | `--windows-product-version=X.Y.Z` | äº§å“ç‰ˆæœ¬å· | `version` |
| æ–‡ä»¶ç‰ˆæœ¬ | `--windows-file-version=X.Y.Z` | æ–‡ä»¶ç‰ˆæœ¬å· | `version` |

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹

### ç•Œé¢é…ç½®
```
åŸºæœ¬é€‰é¡¹ï¼š
  âœ“ ç‹¬ç«‹æ‰“åŒ… (Standalone)
  âœ“ å•æ–‡ä»¶æ¨¡å¼ (One File)
  â–¡ æ˜¾ç¤ºç»ˆç«¯çª—å£
  âœ“ Pythonä¼˜åŒ–

é«˜çº§é€‰é¡¹ï¼š
  LTO: è‡ªåŠ¨ (auto)
  ç¼–è¯‘çº¿ç¨‹: 16
  âœ“ ç§»é™¤æ„å»ºæ–‡ä»¶

æ•°æ®å¯¼å…¥ï¼š
  åŒ…å«åŒ…: textual rich
  åŒ…å«æ¨¡å—: main
  æ•°æ®ç›®å½•: src;src
```

### ç”Ÿæˆçš„å‘½ä»¤
```bash
python -m nuitka \
    --mode=onefile \
    --output-dir=build \
    --output-filename=MyApp \
    --lto=auto \
    --jobs=16 \
    --python-flag=-O \
    --remove-output \
    --follow-imports \
    --include-package=textual \
    --include-package=rich \
    --include-module=main \
    --include-data-dir=src=src \
    --windows-icon-from-ico=app.ico \
    main.py
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q: "åŒ…å«åŒ…" å’Œ "åŒ…å«æ¨¡å—" æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

- **åŒ…å«åŒ…** (`--include-package`)ï¼šåŒ…å«æ•´ä¸ª Python åŒ…åŠå…¶æ‰€æœ‰å­æ¨¡å—
  - ä¾‹å¦‚ï¼š`numpy` ä¼šåŒ…å« `numpy.core`ã€`numpy.linalg` ç­‰æ‰€æœ‰å­æ¨¡å—

- **åŒ…å«æ¨¡å—** (`--include-module`)ï¼šåªåŒ…å«æŒ‡å®šçš„å•ä¸ªæ¨¡å—æ–‡ä»¶
  - ä¾‹å¦‚ï¼š`main` åªåŒ…å« `main.py` æ–‡ä»¶

### Q: ä»€ä¹ˆæ—¶å€™éœ€è¦æ‰‹åŠ¨æŒ‡å®š "åŒ…å«æ¨¡å—"ï¼Ÿ

å½“é‡åˆ°ä»¥ä¸‹é”™è¯¯æ—¶ï¼š
```
Error loading ASGI app. Could not import module "xxx"
```
éœ€è¦åœ¨ **æ•°æ®å¯¼å…¥ â†’ åŒ…å«æ¨¡å—** ä¸­æ·»åŠ  `xxx`ï¼Œæˆ–ä½¿ç”¨ `--include-module=xxx` å‚æ•°ã€‚

### Q: å¦‚ä½•è§£å†³ Textual/FastAPI åº”ç”¨çš„ç¼–è¯‘é—®é¢˜ï¼Ÿ

è¿™ç±»åŸºäº ASGI çš„å¼‚æ­¥åº”ç”¨ï¼Œå»ºè®®æ·»åŠ ï¼š
- **åŒ…å«åŒ…**ï¼š`textual rich` (æˆ– `fastapi uvicorn`)
- **åŒ…å«æ¨¡å—**ï¼š`main` (ä½ çš„å…¥å£æ¨¡å—)

### Q: ç¼–è¯‘çº¿ç¨‹æ•°è®¾ç½®å¤šå°‘åˆé€‚ï¼Ÿ

- **0 æˆ–ä¸å¡«**ï¼šè‡ªåŠ¨ä½¿ç”¨ CPU æ ¸å¿ƒæ•°ï¼ˆæ¨èï¼‰
- **æ­£æ•°**ï¼šæŒ‡å®šçº¿ç¨‹æ•°ï¼ˆå¦‚ `8`ã€`16`ï¼‰
- **è´Ÿæ•°**ï¼šCPU æ ¸å¿ƒæ•°å‡å»è¯¥å€¼ï¼ˆå¦‚ `-2` = æ ¸å¿ƒæ•°-2ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Nuitka å®Œæ•´å‚æ•°åˆ—è¡¨](./Nuitka-Parameters.md)
- [PyInstaller å‚æ•°å¯¹ç…§è¡¨](./PyInstaller-Parameters.md)
- [ä½¿ç”¨æ•™ç¨‹](./Tutorial.md)
